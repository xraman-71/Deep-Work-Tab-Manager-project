<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Deep-Work -- Tab Manager</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&display=swap" rel="stylesheet" />
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #FAFAFA;
    --surface: #FFFFFF;
    --surface-alt: #F5F5F5;
    --border: #E8E8E8;
    --border-strong: #D0D0D0;
    --text: #0A0A0A;
    --text-muted: #6B6B6B;
    --text-light: #9B9B9B;
  }

  html { scroll-behavior: smooth; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.5;
  }

  h1,h2,h3,h4,h5,h6 { font-family: 'Syne', sans-serif; }

  ::-webkit-scrollbar { width: 5px; }
  ::-webkit-scrollbar-track { background: #F5F5F5; }
  ::-webkit-scrollbar-thumb { background: #D0D0D0; border-radius: 99px; }

  /* -- Animations -- */
  @keyframes pulse-dot {
    0%, 100% { opacity: 1; box-shadow: 0 0 6px #22C55E88; }
    50% { opacity: 0.5; box-shadow: 0 0 2px #22C55E44; }
  }
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
  }
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(28px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  @keyframes scaleIn {
    from { opacity: 0; transform: scale(0.93) translateY(16px); }
    to   { opacity: 1; transform: scale(1) translateY(0); }
  }
  @keyframes slideInRight {
    from { opacity: 0; transform: translateX(20px); }
    to   { opacity: 1; transform: translateX(0); }
  }
  @keyframes toastIn {
    from { opacity: 0; transform: translateY(16px) scale(0.95); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }
  @keyframes toastOut {
    from { opacity: 1; transform: translateY(0) scale(1); }
    to   { opacity: 0; transform: translateY(8px) scale(0.95); }
  }
  @keyframes cardIn {
    from { opacity: 0; transform: translateY(18px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  @keyframes fabIn {
    from { opacity: 0; transform: scale(0); }
    to   { opacity: 1; transform: scale(1); }
  }
  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .hero-anim-1 { animation: fadeInUp 0.7s ease 0.1s both; }
  .hero-anim-2 { animation: fadeInUp 0.7s ease 0.25s both; }
  .hero-anim-3 { animation: fadeInUp 0.7s ease 0.4s both; }
  .hero-anim-4 { animation: fadeInUp 0.7s ease 0.55s both; }

  /* -- NAV -- */
  #main-nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 200;
    background: rgba(250,250,250,0.88);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    border-bottom: 1px solid rgba(0,0,0,0.06);
    padding: 0 32px;
  }
  .nav-inner {
    max-width: 1100px; margin: 0 auto;
    height: 60px; display: flex; align-items: center; justify-content: space-between;
  }
  .nav-logo { display: flex; align-items: center; gap: 9px; cursor: pointer; text-decoration: none; }
  .nav-logo-box {
    width: 28px; height: 28px; background: #0A0A0A; border-radius: 7px;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  }
  .nav-logo-text { font-family: 'Syne', sans-serif; font-size: 16px; font-weight: 800; letter-spacing: -0.04em; color: #0A0A0A; }
  .nav-links { display: flex; align-items: center; gap: 28px; }
  .nav-link {
    background: none; border: none; font-family: 'DM Sans', sans-serif;
    font-size: 14px; font-weight: 500; color: #6B6B6B; cursor: pointer;
    letter-spacing: -0.01em; transition: color 0.2s; padding: 0;
  }
  .nav-link:hover { color: #0A0A0A; }
  .btn-primary {
    background: #0A0A0A; color: #FFF; border: none; border-radius: 10px;
    padding: 9px 20px; font-size: 13px; font-weight: 700; cursor: pointer;
    font-family: 'DM Sans', sans-serif; letter-spacing: -0.01em;
    transition: opacity 0.2s, transform 0.2s;
  }
  .btn-primary:hover { opacity: 0.8; }
  .btn-secondary {
    background: #FAFAFA; color: #0A0A0A; border: 1.5px solid #E0E0E0; border-radius: 10px;
    padding: 9px 16px; font-size: 13px; font-weight: 600; cursor: pointer;
    font-family: 'DM Sans', sans-serif; letter-spacing: -0.01em;
    transition: all 0.2s; display: flex; align-items: center; gap: 7px;
  }
  .btn-secondary:hover { border-color: #C0C0C0; background: #FFFFFF; }

  /* -- HERO -- */
  @keyframes orb-drift-1 {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(40px, -30px) scale(1.08); }
    66% { transform: translate(-20px, 20px) scale(0.95); }
  }
  @keyframes orb-drift-2 {
    0%, 100% { transform: translate(0, 0) scale(1); }
    40% { transform: translate(-50px, 30px) scale(1.05); }
    70% { transform: translate(30px, -20px) scale(0.97); }
  }
  @keyframes orb-drift-3 {
    0%, 100% { transform: translate(0, 0) scale(1); }
    30% { transform: translate(25px, 40px) scale(1.1); }
    60% { transform: translate(-35px, -15px) scale(0.93); }
  }
  #hero-canvas {
    position: absolute; inset: 0;
    width: 100%; height: 100%;
    pointer-events: none; z-index: 0;
  }
  .hero-orb {
    position: absolute; border-radius: 50%;
    pointer-events: none; z-index: 0;
    filter: blur(60px);
  }

  #hero {
    min-height: 100vh; padding: 130px 32px 80px;
    display: flex; align-items: center; justify-content: center;
    background: var(--bg); position: relative; overflow: hidden;
  }
  .hero-grid {
    position: absolute; inset: 0;
    background-image: linear-gradient(#F0F0F0 1px, transparent 1px),
                      linear-gradient(90deg, #F0F0F0 1px, transparent 1px);
    background-size: 40px 40px; opacity: 0.65;
  }
  .hero-fade {
    position: absolute; inset: 0;
    background: radial-gradient(ellipse 80% 60% at 50% 0%, transparent, rgba(250,250,250,0.95) 75%);
  }
  .hero-content { position: relative; text-align: center; max-width: 700px; width: 100%; }
  .hero-badge {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 4px 12px; border-radius: 999px;
    background: #F5F5F5; border: 1px solid #E0E0E0;
    font-size: 11px; font-weight: 700; letter-spacing: 0.07em; color: #2D2D2D;
    user-select: none; margin-bottom: 24px;
  }
  .badge-dot {
    width: 7px; height: 7px; border-radius: 50%; background: #22C55E;
    animation: pulse-dot 2s infinite; flex-shrink: 0;
  }
  .hero-h1 {
    font-size: clamp(44px, 7.5vw, 78px);
    font-weight: 800; line-height: 1.05; letter-spacing: -0.04em;
    color: #0A0A0A; margin-bottom: 22px;
  }
  .hero-h1 span { color: #6B6B6B; }
  .hero-sub {
    font-size: 18px; color: #6B6B6B; line-height: 1.65;
    margin-bottom: 40px; font-weight: 400;
  }
  .hero-sub strong { color: #0A0A0A; font-weight: 600; }
  .hero-ctas { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-bottom: 64px; }
  .btn-hero {
    background: #0A0A0A; color: #FFF; border: none; border-radius: 14px;
    padding: 15px 34px; font-size: 16px; font-weight: 700; cursor: pointer;
    font-family: 'DM Sans', sans-serif; letter-spacing: -0.02em;
    box-shadow: 0 4px 24px rgba(0,0,0,0.15);
    transition: transform 0.2s, box-shadow 0.2s;
  }
  .btn-hero:hover { transform: translateY(-2px); box-shadow: 0 8px 32px rgba(0,0,0,0.2); }
  .btn-hero-outline {
    background: #FFF; color: #0A0A0A; border: 1.5px solid #E0E0E0; border-radius: 14px;
    padding: 15px 22px; font-size: 15px; font-weight: 600; cursor: pointer;
    font-family: 'DM Sans', sans-serif; letter-spacing: -0.01em;
    display: flex; align-items: center; gap: 8px; transition: all 0.2s;
  }
  .btn-hero-outline:hover { border-color: #B0B0B0; }
  kbd {
    font-size: 11px; background: #F5F5F5; padding: 2px 7px;
    border-radius: 5px; border: 1px solid #E0E0E0; color: #6B6B6B;
    font-family: monospace;
  }
  .tab-pills { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; margin-bottom: 24px; }
  .tab-pill {
    background: #FFF; border: 1px solid #E8E8E8; border-radius: 10px;
    padding: 8px 14px; font-size: 12px; font-weight: 600; color: #3D3D3D;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  .tab-pill:nth-child(1) { animation: float 2.5s ease-in-out infinite 0s; }
  .tab-pill:nth-child(2) { animation: float 2.8s ease-in-out infinite 0.2s; }
  .tab-pill:nth-child(3) { animation: float 2.6s ease-in-out infinite 0.4s; }
  .tab-pill:nth-child(4) { animation: float 3.0s ease-in-out infinite 0.1s; }
  .tab-pill:nth-child(5) { animation: float 2.7s ease-in-out infinite 0.3s; }
  .brain-merge {
    display: flex; align-items: center; justify-content: center; gap: 14px;
  }
  .merge-line {
    height: 1px; width: 90px;
  }
  .merge-line-left { background: linear-gradient(to right, transparent, #C8C8C8); }
  .merge-line-right { background: linear-gradient(to left, transparent, #C8C8C8); }
  .brain-chip {
    background: #0A0A0A; color: #FFF; border-radius: 12px;
    padding: 10px 20px; font-size: 13px; font-weight: 700; letter-spacing: -0.02em;
    display: flex; align-items: center; gap: 8px;
  }

  /* -- SECTIONS -- */
  .section { padding: 100px 32px; }
  .section-white { background: #FFFFFF; }
  .section-gray { background: #FAFAFA; }
  .section-dark { background: #0A0A0A; }
  .section-inner { max-width: 1000px; margin: 0 auto; }
  .section-inner-sm { max-width: 700px; margin: 0 auto; }
  .section-header { text-align: center; margin-bottom: 56px; }
  .section-label {
    font-size: 11px; font-weight: 700; letter-spacing: 0.1em;
    color: #B0B0B0; text-transform: uppercase; margin-bottom: 10px;
  }
  .section-label-dark { color: #5A5A5A; }
  .section-h2 {
    font-size: clamp(28px, 4vw, 42px); font-weight: 800;
    letter-spacing: -0.04em; color: #0A0A0A;
  }
  .section-h2-white { color: #FFFFFF; }

  /* -- HOW IT WORKS -- */
  .steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; }
  .step-card {
    background: #FAFAFA; border: 1px solid #EBEBEB; border-radius: 20px;
    padding: 32px; animation: fadeInUp 0.6s ease both;
  }
  .step-card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }
  .step-icon {
    width: 44px; height: 44px; border-radius: 12px; background: #0A0A0A;
    display: flex; align-items: center; justify-content: center;
  }
  .step-num { font-family: 'Syne', sans-serif; font-size: 40px; font-weight: 800; color: #F0F0F0; letter-spacing: -0.05em; }
  .step-title { font-size: 20px; font-weight: 800; letter-spacing: -0.03em; margin-bottom: 10px; }
  .step-desc { font-size: 14px; color: #6B6B6B; line-height: 1.7; }

  /* -- FEATURES -- */
  .features-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(190px, 1fr)); gap: 16px; }
  .feature-card {
    background: #FFF; border: 1px solid #EBEBEB; border-radius: 16px;
    padding: 24px; transition: all 0.25s; cursor: default;
  }
  .feature-card:hover { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(0,0,0,0.07); border-color: #D0D0D0; }
  .feature-icon { margin-bottom: 12px; color: #0A0A0A; }
  .feature-title { font-size: 15px; font-weight: 700; letter-spacing: -0.02em; margin-bottom: 6px; }
  .feature-desc { font-size: 13px; color: #9B9B9B; line-height: 1.6; }

  /* -- DASHBOARD -- */
  #dashboard { padding: 80px 32px 120px; background: #FFF; min-height: 80vh; }
  .dash-inner { max-width: 1100px; margin: 0 auto; }
  .dash-header {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 28px; flex-wrap: wrap; gap: 16px;
  }
  .dash-actions { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
  .dash-stats { display: flex; gap: 14px; margin-bottom: 26px; flex-wrap: wrap; }
  .stat-pill {
    background: #FAFAFA; border: 1px solid #EBEBEB; border-radius: 12px;
    padding: 12px 20px; display: flex; align-items: center; gap: 10px;
  }
  .stat-num { font-family: 'Syne', sans-serif; font-size: 22px; font-weight: 800; letter-spacing: -0.04em; }
  .stat-label { font-size: 12px; color: #9B9B9B; font-weight: 500; }
  .search-wrap { position: relative; margin-bottom: 26px; }
  .search-icon { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); pointer-events: none; }
  .search-input {
    width: 100%; padding: 11px 14px 11px 42px; border-radius: 12px;
    border: 1.5px solid #E8E8E8; font-size: 14px; outline: none;
    color: #0A0A0A; background: #FAFAFA; font-family: 'DM Sans', sans-serif;
    transition: border-color 0.2s;
  }
  .search-input:focus { border-color: #0A0A0A; }

  /* -- SESSION GRID -- */
  .sessions-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
  }
  .session-card {
    background: #FFFFFF; border: 1px solid #EBEBEB; border-radius: 16px;
    padding: 24px; position: relative; overflow: hidden;
    transition: transform 0.25s, box-shadow 0.25s, border-color 0.25s;
    cursor: default; animation: cardIn 0.35s ease both;
  }
  .session-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 40px rgba(0,0,0,0.08);
    border-color: #C0C0C0;
  }
  .pin-corner {
    position: absolute; top: 0; right: 0;
    width: 0; height: 0; border-style: solid;
    border-width: 0 26px 26px 0;
    border-color: transparent #0A0A0A transparent transparent;
  }
  .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
  .card-title { font-size: 17px; font-weight: 700; color: #0A0A0A; letter-spacing: -0.02em; line-height: 1.3; }
  .card-date { display: flex; align-items: center; gap: 5px; margin-top: 4px; }
  .card-date span { font-size: 12px; color: #9B9B9B; }
  .card-actions { display: flex; gap: 4px; }
  .card-btn {
    background: none; border: 1px solid #EBEBEB; border-radius: 8px;
    padding: 5px 7px; cursor: pointer; color: #9B9B9B;
    transition: all 0.2s; display: flex; align-items: center; justify-content: center;
    line-height: 0;
  }
  .card-btn:hover { border-color: #C0C0C0; color: #0A0A0A; background: #F8F8F8; }
  .card-btn.pinned { color: #0A0A0A; }
  .card-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 14px; }
  .card-tag {
    border-radius: 6px; padding: 3px 9px;
    font-size: 11px; font-weight: 600; letter-spacing: 0.03em;
  }
  .url-list {
    background: #F8F8F8; border-radius: 12px;
    margin-bottom: 16px; overflow: hidden;
  }
  .url-row {
    display: flex; align-items: center; gap: 8px;
    padding: 8px 11px;
    border-bottom: 1px solid #F0F0F0;
    transition: background 0.15s;
    cursor: default;
  }
  .url-row:last-child { border-bottom: none; }
  .url-row:hover { background: #F0F0F0; }
  .url-row-text {
    flex: 1; font-size: 12px; color: #4A4A4A; white-space: nowrap;
    overflow: hidden; text-overflow: ellipsis; line-height: 1.4;
    font-weight: 500;
  }
  .url-open-btn {
    flex-shrink: 0; background: none; border: 1px solid #E0E0E0;
    border-radius: 6px; padding: 3px 8px; cursor: pointer;
    font-size: 11px; font-weight: 600; color: #6B6B6B;
    font-family: 'DM Sans', sans-serif;
    display: flex; align-items: center; gap: 4px;
    transition: all 0.15s; white-space: nowrap;
  }
  .url-open-btn:hover { background: #0A0A0A; color: #FFF; border-color: #0A0A0A; }
  .url-del-btn {
    flex-shrink: 0; background: none; border: 1px solid #E0E0E0;
    border-radius: 6px; padding: 3px 6px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    color: #C0C0C0; transition: all 0.15s;
  }
  .url-del-btn:hover { background: #FEE2E2; color: #EF4444; border-color: #FECACA; }
  .url-row-actions {
    display: flex; gap: 4px; align-items: center;
    opacity: 0; pointer-events: none; flex-shrink: 0;
    transition: opacity 0.15s;
  }
  .url-row:hover .url-row-actions { opacity: 1; pointer-events: all; }
  .url-show-more {
    padding: 7px 11px; font-size: 11px; color: #9B9B9B;
    font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 5px;
    transition: background 0.15s; border-top: 1px solid #F0F0F0;
    background: none; border-left: none; border-right: none; border-bottom: none;
    width: 100%; font-family: 'DM Sans', sans-serif; text-align: left;
  }
  .url-show-more:hover { background: #EBEBEB; color: #0A0A0A; }
  .card-footer { display: flex; align-items: center; justify-content: space-between; }
  .card-count { font-size: 12px; color: #9B9B9B; font-weight: 500; }

  /* -- EMPTY STATE -- */
  .empty-state {
    text-align: center; padding: 80px 32px;
    border: 2px dashed #E8E8E8; border-radius: 20px;
  }
  .empty-icon { margin-bottom: 16px; color: #D0D0D0; }
  .empty-title { color: #C0C0C0; font-weight: 600; margin-bottom: 8px; font-size: 18px; }
  .empty-sub { color: #D0D0D0; font-size: 14px; margin-bottom: 24px; }

  /* -- PHILOSOPHY -- */
  .phil-badges { display: flex; gap: 16px; justify-content: center; margin-top: 48px; flex-wrap: wrap; }
  .phil-badge {
    display: flex; align-items: center; gap: 8px; padding: 10px 18px;
    border-radius: 10px; border: 1px solid #2A2A2A; color: #6B6B6B;
    font-size: 13px; font-weight: 600;
  }

  /* -- PRIVACY -- */
  .privacy-box {
    background: #FFF; border: 1px solid #EBEBEB; border-radius: 16px;
    padding: 24px; display: flex; align-items: center; gap: 16px; text-align: left;
    margin-top: 32px;
  }
  .privacy-icon {
    width: 48px; height: 48px; background: #F5F5F5; border-radius: 12px;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  }
  .privacy-title { font-weight: 700; font-size: 15px; margin-bottom: 4px; }
  .privacy-desc { font-size: 13px; color: #9B9B9B; }

  /* -- FAQ -- */
  .faq-item { border-bottom: 1px solid #F0F0F0; }
  .faq-btn {
    width: 100%; background: none; border: none; padding: 20px 0;
    display: flex; justify-content: space-between; align-items: center;
    cursor: pointer; text-align: left; font-family: 'DM Sans', sans-serif;
  }
  .faq-q { font-size: 16px; font-weight: 600; color: #0A0A0A; letter-spacing: -0.02em; }
  .faq-chevron { transition: transform 0.25s ease; flex-shrink: 0; }
  .faq-chevron.open { transform: rotate(180deg); }
  .faq-answer {
    overflow: hidden; max-height: 0;
    transition: max-height 0.3s ease, opacity 0.3s ease;
    opacity: 0;
  }
  .faq-answer.open { max-height: 200px; opacity: 1; }
  .faq-a { font-size: 14px; color: #6B6B6B; line-height: 1.7; padding-bottom: 18px; }

  /* -- FOOTER -- */
  footer {
    background: #0A0A0A; padding: 48px 32px;
    border-top: 1px solid #1A1A1A;
  }
  .footer-inner {
    max-width: 1000px; margin: 0 auto;
    display: flex; justify-content: space-between; align-items: center;
    flex-wrap: wrap; gap: 20px;
  }
  .footer-logo { display: flex; align-items: center; gap: 9px; }
  .footer-logo-box {
    width: 26px; height: 26px; background: #FAFAFA; border-radius: 7px;
    display: flex; align-items: center; justify-content: center;
  }
  .footer-logo-text { font-family: 'Syne', sans-serif; font-size: 15px; font-weight: 800; color: #FFF; letter-spacing: -0.04em; }
  .footer-copy { color: #4A4A4A; font-size: 13px; font-weight: 500; }
  .footer-links { display: flex; gap: 20px; }
  .footer-link {
    background: none; border: none; color: #4A4A4A; cursor: pointer;
    font-size: 13px; font-family: 'DM Sans', sans-serif; padding: 0; transition: color 0.2s;
  }
  .footer-link:hover { color: #FFF; }

  /* -- MODAL OVERLAY -- */
  .modal-overlay {
    position: fixed; inset: 0; z-index: 500;
    background: rgba(0,0,0,0.28);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    display: flex; align-items: center; justify-content: center;
    padding: 16px;
  }
  .modal-box {
    background: #FFF; border-radius: 20px; padding: 32px;
    width: 100%; max-width: 500px;
    box-shadow: 0 40px 80px rgba(0,0,0,0.15);
    border: 1px solid #E8E8E8;
    animation: scaleIn 0.28s ease both;
  }
  .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
  .modal-title { font-size: 20px; font-weight: 800; letter-spacing: -0.03em; }
  .modal-close {
    background: none; border: none; cursor: pointer; color: #9B9B9B;
    padding: 4px; display: flex; align-items: center; transition: color 0.2s;
  }
  .modal-close:hover { color: #0A0A0A; }
  .form-label {
    display: block; font-size: 12px; font-weight: 600; color: #6B6B6B;
    margin-bottom: 6px; letter-spacing: 0.05em; text-transform: uppercase;
  }
  .form-input {
    width: 100%; padding: 11px 14px; border-radius: 10px;
    border: 1.5px solid #E0E0E0; font-size: 15px; outline: none;
    color: #0A0A0A; background: #FAFAFA; font-family: 'DM Sans', sans-serif;
    transition: border-color 0.2s; margin-bottom: 16px;
  }
  .form-input:focus { border-color: #0A0A0A; }
  .form-textarea {
    width: 100%; padding: 11px 14px; border-radius: 10px;
    border: 1.5px solid #E0E0E0; font-size: 13px; outline: none;
    color: #0A0A0A; background: #FAFAFA; font-family: monospace;
    line-height: 1.7; resize: vertical; margin-bottom: 16px;
    transition: border-color 0.2s;
  }
  .form-textarea:focus { border-color: #0A0A0A; }
  .tag-row { display: flex; gap: 8px; align-items: center; }
  .tag-input {
    flex: 1; padding: 9px 12px; border-radius: 10px;
    border: 1.5px solid #E0E0E0; font-size: 13px; outline: none;
    color: #0A0A0A; background: #FAFAFA; font-family: 'DM Sans', sans-serif;
    transition: border-color 0.2s;
  }
  .tag-input:focus { border-color: #0A0A0A; }
  .color-swatches { display: flex; gap: 5px; align-items: center; }
  .color-swatch {
    width: 22px; height: 22px; border-radius: 6px;
    border: 2px solid transparent; cursor: pointer; transition: border-color 0.15s;
  }
  .color-swatch.active { border-color: #0A0A0A; }
  .btn-save {
    width: 100%; padding: 13px; background: #0A0A0A; color: #FFF;
    border: none; border-radius: 12px; font-size: 15px; font-weight: 700;
    cursor: pointer; font-family: 'DM Sans', sans-serif; letter-spacing: -0.01em;
    transition: opacity 0.2s; margin-top: 8px;
  }
  .btn-save:hover { opacity: 0.85; }
  .btn-save:disabled { background: #E0E0E0; color: #9B9B9B; cursor: not-allowed; }

  /* -- COMMAND PALETTE -- */
  #palette-overlay {
    position: fixed; inset: 0; z-index: 600;
    background: rgba(0,0,0,0.22);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    display: flex; align-items: flex-start; justify-content: center;
    padding-top: 110px; padding-left: 16px; padding-right: 16px;
  }
  .palette-box {
    background: #FFF; border-radius: 18px; width: 100%; max-width: 580px;
    box-shadow: 0 40px 80px rgba(0,0,0,0.18);
    border: 1px solid #E0E0E0; overflow: hidden;
    animation: scaleIn 0.22s ease both;
  }
  .palette-search {
    display: flex; align-items: center; gap: 12px;
    padding: 16px 20px; border-bottom: 1px solid #F0F0F0;
  }
  .palette-input {
    flex: 1; border: none; outline: none;
    font-size: 16px; color: #0A0A0A; background: none;
    font-family: 'DM Sans', sans-serif;
  }
  .palette-results { max-height: 360px; overflow-y: auto; }
  .palette-result {
    display: flex; align-items: center; gap: 12px; padding: 12px 20px;
    border-bottom: 1px solid #F8F8F8; text-decoration: none;
    transition: background 0.15s; cursor: pointer;
    animation: slideInRight 0.2s ease both;
  }
  .palette-result:hover { background: #F8F8F8; }
  .palette-url { font-size: 13px; color: #0A0A0A; font-weight: 500; }
  .palette-session { font-size: 11px; color: #9B9B9B; }
  .palette-empty { padding: 40px; text-align: center; color: #C0C0C0; font-size: 14px; }
  .palette-hints { padding: 16px 20px; display: flex; flex-wrap: wrap; gap: 8px; }
  .palette-hint {
    padding: 6px 12px; border-radius: 8px; background: #F5F5F5;
    font-size: 12px; color: #6B6B6B; cursor: pointer; transition: background 0.2s;
  }
  .palette-hint:hover { background: #EBEBEB; }

  /* -- TOAST -- */
  #toast {
    position: fixed; bottom: 32px; right: 32px; z-index: 900;
    background: #0A0A0A; color: #FFF;
    padding: 12px 20px; border-radius: 12px;
    font-size: 13px; font-weight: 600; font-family: 'DM Sans', sans-serif;
    box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    display: none; align-items: center; gap: 10px;
    animation: toastIn 0.3s ease both;
  }
  #toast.show { display: flex; }

  /* -- FAB -- */
  #fab {
    position: fixed; bottom: 32px; left: 32px; z-index: 90;
    width: 52px; height: 52px; border-radius: 50%;
    background: #0A0A0A; border: none; color: #FFF;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    box-shadow: 0 4px 24px rgba(0,0,0,0.2); transition: transform 0.2s, box-shadow 0.2s;
    animation: fabIn 0.5s cubic-bezier(0.34,1.56,0.64,1) 1s both;
  }
  #fab:hover { transform: scale(1.1); box-shadow: 0 8px 28px rgba(0,0,0,0.25); }

  /* -- SVG ICONS (inline) -- */
  .icon { display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; }

  /* -- Who It's For -- */
  .audience-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 20px;
  }
  .audience-card {
    background: #FFFFFF;
    border: 1px solid #EBEBEB;
    border-radius: 20px;
    padding: 28px;
    position: relative;
    overflow: hidden;
    transition: transform 0.25s, box-shadow 0.25s, border-color 0.25s;
    cursor: default;
  }
  .audience-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 16px 48px rgba(0,0,0,0.08);
    border-color: #C8C8C8;
  }
  .audience-card-top {
    display: flex; align-items: flex-start; gap: 14px; margin-bottom: 16px;
  }
  .audience-icon-wrap {
    width: 46px; height: 46px; border-radius: 14px;
    background: #F5F5F5; display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
  }
  .audience-role {
    font-size: 17px; font-weight: 800; letter-spacing: -0.03em;
    color: #0A0A0A; margin-bottom: 2px;
  }
  .audience-tagline {
    font-size: 12px; color: #9B9B9B; font-weight: 500;
  }
  .audience-desc {
    font-size: 13.5px; color: #6B6B6B; line-height: 1.7; margin-bottom: 18px;
  }
  .audience-pain {
    display: flex; flex-direction: column; gap: 7px;
  }
  .audience-pain-item {
    display: flex; align-items: flex-start; gap: 8px;
    font-size: 12.5px; color: #4A4A4A; line-height: 1.5;
  }
  .pain-check {
    width: 16px; height: 16px; border-radius: 5px;
    background: #0A0A0A; display: flex; align-items: center; justify-content: center;
    flex-shrink: 0; margin-top: 1px;
  }
  .audience-accent-line {
    position: absolute; bottom: 0; left: 0; right: 0;
    height: 3px; background: #0A0A0A; transform: scaleX(0);
    transform-origin: left; transition: transform 0.35s ease;
  }
  .audience-card:hover .audience-accent-line { transform: scaleX(1); }
  .not-for-box {
    margin-top: 48px;
    background: #FAFAFA;
    border: 1px solid #EBEBEB;
    border-radius: 18px;
    padding: 28px 32px;
    display: flex;
    align-items: flex-start;
    gap: 18px;
  }
  .not-for-icon {
    width: 40px; height: 40px; border-radius: 10px;
    background: #F0F0F0; display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
  }
  .not-for-title {
    font-size: 15px; font-weight: 700; letter-spacing: -0.02em; margin-bottom: 8px;
  }
  .not-for-tags { display: flex; flex-wrap: wrap; gap: 8px; }
  .not-for-tag {
    padding: 5px 12px; border-radius: 8px;
    background: #F0F0F0; color: #6B6B6B;
    font-size: 12px; font-weight: 500;
    text-decoration: line-through; text-decoration-color: #C0C0C0;
  }

  /* -- Page System -- */
  #page-landing { display: block; }
  #page-dashboard { display: none; }

  #page-dashboard {
    min-height: 100vh;
    background: #FAFAFA;
    padding-top: 0;
  }

  .dash-topbar {
    position: sticky; top: 0; z-index: 200;
    background: rgba(250,250,250,0.92);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-bottom: 1px solid #EBEBEB;
    padding: 0 32px;
  }
  .dash-topbar-inner {
    max-width: 1100px; margin: 0 auto;
    height: 60px; display: flex; align-items: center; justify-content: space-between; gap: 16px;
  }
  .dash-topbar-left { display: flex; align-items: center; gap: 14px; }
  .btn-back {
    display: flex; align-items: center; gap: 6px;
    background: none; border: 1.5px solid #E0E0E0; border-radius: 9px;
    padding: 7px 14px; font-size: 13px; font-weight: 600; color: #6B6B6B;
    cursor: pointer; font-family: 'DM Sans', sans-serif; transition: all 0.2s;
  }
  .btn-back:hover { border-color: #0A0A0A; color: #0A0A0A; background: #F5F5F5; }
  .dash-page-title {
    font-family: 'Syne', sans-serif;
    font-size: 17px; font-weight: 800; letter-spacing: -0.04em; color: #0A0A0A;
  }
  .dash-topbar-actions { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }

  .dash-body { max-width: 1100px; margin: 0 auto; padding: 36px 32px 80px; }

  @keyframes pageIn {
    from { opacity: 0; transform: translateY(16px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .page-animate { animation: pageIn 0.35s ease both; }

  /* -- Help Modal -- */
  .help-tab {
    display: flex; align-items: center; gap: 6px;
    padding: 12px 14px; background: none; border: none;
    font-size: 13px; font-weight: 600; color: #9B9B9B;
    cursor: pointer; font-family: 'DM Sans', sans-serif;
    border-bottom: 2px solid transparent; margin-bottom: -1px;
    transition: color 0.2s, border-color 0.2s;
    white-space: nowrap;
  }
  .help-tab:hover { color: #0A0A0A; }
  .help-tab.active { color: #0A0A0A; border-bottom-color: #0A0A0A; }
  .help-hero-icon {
    width: 56px; height: 56px; border-radius: 16px;
    display: flex; align-items: center; justify-content: center;
    margin-bottom: 16px;
  }
  .help-section-title {
    font-size: 18px; font-weight: 800; letter-spacing: -0.03em;
    color: #0A0A0A; margin: 0 0 8px; font-family: 'Syne', sans-serif;
  }
  .help-desc {
    font-size: 14px; color: #6B6B6B; line-height: 1.65; margin: 0 0 22px;
  }
  .help-steps { display: flex; flex-direction: column; gap: 14px; margin-bottom: 20px; }
  .help-step {
    display: flex; align-items: flex-start; gap: 14px;
    padding: 14px 16px; background: #FAFAFA; border-radius: 12px;
    border: 1px solid #F0F0F0;
  }
  .help-step-num {
    width: 26px; height: 26px; border-radius: 8px; background: #0A0A0A;
    color: #FFF; font-size: 12px; font-weight: 800; display: flex;
    align-items: center; justify-content: center; flex-shrink: 0;
    font-family: 'Syne', sans-serif;
  }
  .help-step-title {
    font-size: 13.5px; font-weight: 700; color: #0A0A0A;
    margin-bottom: 4px; letter-spacing: -0.01em;
  }
  .help-step-desc { font-size: 12.5px; color: #6B6B6B; line-height: 1.6; }
  .help-tip {
    display: flex; align-items: flex-start; gap: 10px;
    padding: 12px 14px; background: #EFF6FF; border-radius: 10px;
    border: 1px solid #BFDBFE; font-size: 12.5px; color: #1E3A5F; line-height: 1.6;
  }
  .help-tip svg { flex-shrink: 0; margin-top: 1px; }
  /* ================================================================
     RESPONSIVE SYSTEM — Mobile-first, tested across all breakpoints
     xs: 320-479  sm: 480-767  md: 768-1023  lg: 1024-1279  xl: 1280+
  ================================================================ */

  /* -- Global base: prevent horizontal overflow on all devices -- */
  html { overflow-x: hidden; }
  body { overflow-x: hidden; min-width: 320px; }
  *, *::before, *::after { max-width: 100%; }
  img, svg, canvas { max-width: 100%; }

  /* -- Touch device improvements -- */
  button, a, input, textarea, select {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  input, textarea, select { font-size: 16px; } /* prevents iOS zoom on focus */

  /* -- Fluid containers -- */
  .section-inner, .section-inner-sm, .dash-inner, .dash-topbar-inner, .nav-inner, .footer-inner {
    width: 100%;
    padding-left: clamp(16px, 4vw, 32px);
    padding-right: clamp(16px, 4vw, 32px);
  }

  /* ── XL: 1280px+ ──────────────────────────────── */
  @media (min-width: 1280px) {
    .sessions-grid { grid-template-columns: repeat(3, 1fr); }
    .features-grid { grid-template-columns: repeat(4, 1fr); }
  }

  /* ── LG: 1024–1279px ──────────────────────────── */
  @media (max-width: 1279px) and (min-width: 1024px) {
    .features-grid { grid-template-columns: repeat(3, 1fr); }
  }

  /* ── MD: 768–1023px (tablet) ──────────────────── */
  @media (max-width: 1023px) {
    /* Nav */
    .nav-links { display: none; }
    #main-nav { padding: 0 clamp(16px, 3vw, 24px); }

    /* Hero */
    .hero-h1 { font-size: clamp(36px, 5.5vw, 58px); }
    .hero-sub { font-size: 17px; }

    /* Grids */
    .features-grid { grid-template-columns: repeat(3, 1fr); gap: 14px; }
    .audience-grid { grid-template-columns: repeat(2, 1fr); }
    .sessions-grid { grid-template-columns: repeat(2, 1fr); }

    /* Dashboard */
    .dash-topbar { padding: 0 20px; }
    .dash-body { padding: 28px 20px 80px; }
  }

  /* ── SM: 480–767px (large phone / small tablet) ── */
  @media (max-width: 767px) {
    /* Nav */
    .nav-links { display: none; }
    #main-nav { padding: 0 20px; }
    .nav-cta { display: none; }

    /* Hero */
    #hero { padding: 108px 20px 64px; }
    .hero-h1 { font-size: clamp(32px, 8vw, 48px); letter-spacing: -0.03em; }
    .hero-sub { font-size: 16px; margin-bottom: 32px; }
    .hero-badge { font-size: 10.5px; padding: 4px 10px; }
    .hero-ctas { flex-direction: column; align-items: center; gap: 10px; }
    .btn-hero { width: 100%; max-width: 340px; justify-content: center; padding: 14px 28px; }
    .btn-hero-outline { width: 100%; max-width: 340px; justify-content: center; }
    .tab-pills { gap: 6px; margin-bottom: 20px; }
    .tab-pill { padding: 6px 10px; font-size: 11px; }

    /* Sections */
    .section { padding: 72px 20px; }
    .section-header { margin-bottom: 36px; }
    .section-h2 { font-size: clamp(22px, 6vw, 32px); }

    /* Steps — single column */
    .steps-grid { grid-template-columns: 1fr; gap: 14px; }
    .step-card { padding: 24px 20px; }
    .step-num { font-size: 12px; }

    /* Features — 2 cols */
    .features-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
    .feature-card { padding: 16px; }
    .feature-icon { width: 36px; height: 36px; }
    .feature-title { font-size: 13px; }
    .feature-desc { font-size: 12px; }

    /* Who It's For */
    .audience-grid { grid-template-columns: 1fr; gap: 14px; }
    .not-for-box { flex-direction: column; gap: 10px; padding: 20px; }
    .not-for-tags { gap: 6px; }

    /* Philosophy badges */
    .phil-badges { flex-direction: row; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 32px; }

    /* Privacy box */
    .privacy-box { flex-direction: column; text-align: center; gap: 12px; }

    /* FAQ */
    .faq-btn { padding: 16px 0; }
    .faq-q { font-size: 15px; }

    /* Footer */
    footer { padding: 40px 20px; }
    .footer-inner { flex-direction: column; text-align: center; gap: 18px; }
    .footer-links { justify-content: center; flex-wrap: wrap; gap: 8px; }

    /* Dashboard topbar */
    .dash-topbar { padding: 0; }
    .dash-topbar-inner {
      height: auto; min-height: 56px; padding: 10px 16px;
      flex-wrap: wrap; gap: 8px;
    }
    .dash-topbar-left { flex-wrap: wrap; gap: 8px; min-width: 0; }
    .dash-topbar-actions { flex-wrap: wrap; gap: 6px; }
    .dash-topbar-actions .btn-secondary span { display: none; }
    .dash-topbar-actions .btn-secondary kbd { display: none; }
    .dash-topbar-actions .btn-secondary { padding: 8px 10px; min-width: 36px; justify-content: center; }
    .dash-page-title { font-size: 15px; }
    .btn-back { padding: 7px 10px; font-size: 12px; }

    /* Dashboard body */
    .dash-body { padding: 20px 16px 100px; }
    .sessions-grid { grid-template-columns: 1fr; gap: 14px; }
    .dash-stats { gap: 8px; flex-wrap: wrap; }
    .stat-pill { padding: 10px 14px; flex: 1; min-width: 80px; }
    .stat-num { font-size: 20px; }
    .stat-label { font-size: 11px; }

    /* Search bar */
    .search-input { font-size: 16px; padding: 12px 14px 12px 42px; }

    /* Session cards */
    .session-card { padding: 20px; }
    .card-title { font-size: 16px; }
    .url-open-btn { opacity: 1; pointer-events: all; } /* always visible on touch */

    /* Modals — slide up from bottom on mobile */
    .modal-overlay {
      padding: 0;
      align-items: flex-end;
      justify-content: stretch;
    }
    .modal-box {
      border-radius: 24px 24px 0 0;
      padding: 28px 20px 32px;
      max-height: 92dvh;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      width: 100%;
      max-width: 100%;
      animation: slideUpModal 0.3s cubic-bezier(0.32,0.72,0,1) both;
    }
    @keyframes slideUpModal {
      from { transform: translateY(100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .modal-header { margin-bottom: 20px; }
    .modal-title { font-size: 18px; }
    .form-input { font-size: 16px; padding: 12px 14px; }
    .form-textarea { font-size: 14px; }

    /* Help modal — also slide up */
    #help-modal .modal-box {
      max-height: 92dvh;
      padding: 0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    #help-modal .modal-box > div:nth-child(2) { /* tabs row */
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      flex-shrink: 0;
    }
    #help-modal .modal-box > div:nth-child(2)::-webkit-scrollbar { display: none; }
    .help-tab { white-space: nowrap; font-size: 12px; padding: 10px 10px; }
    #help-modal .modal-box > div:nth-child(3) { /* content area */
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      flex: 1;
    }

    /* Command palette */
    #palette-overlay {
      padding: 0;
      align-items: flex-start;
    }
    .palette-box {
      border-radius: 0 0 18px 18px;
      max-height: 80dvh;
      width: 100%;
      max-width: 100%;
    }

    /* Toast — full width at bottom */
    #toast {
      left: 12px; right: 12px; bottom: 16px;
      border-radius: 14px; font-size: 13px;
    }

    /* FAB */
    #fab { width: 48px; height: 48px; bottom: 24px; left: 16px; }
  }

  /* ── XS: max 479px (phones) ───────────────────── */
  @media (max-width: 479px) {
    /* Nav — hide logo text to save space */
    .nav-logo-text { display: none; }
    .nav-inner { height: 52px; }

    /* Hero */
    #hero { padding: 96px 16px 48px; }
    .hero-h1 { font-size: clamp(28px, 9vw, 40px); line-height: 1.08; }
    .hero-sub { font-size: 15px; margin-bottom: 24px; }

    /* Sections */
    .section { padding: 56px 16px; }
    .section-h2 { font-size: clamp(20px, 7vw, 28px); }

    /* Features — 1 col on tiny phones */
    .features-grid { grid-template-columns: 1fr; }

    /* Session card */
    .session-card { padding: 16px; }
    .card-title { font-size: 15px; }
    .url-row-text { font-size: 11.5px; }
    .url-row { padding: 7px 10px; }
    .card-footer { padding-top: 12px; }

    /* Stat pills — grid */
    .dash-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }
    .stat-pill {
      flex-direction: column; align-items: center;
      padding: 10px 6px; gap: 2px; text-align: center;
    }
    .stat-num { font-size: 18px; }
    .stat-label { font-size: 10px; white-space: nowrap; }

    /* Dashboard topbar — tighter */
    .dash-topbar-inner { padding: 8px 12px; }
    .btn-primary { padding: 8px 12px; font-size: 12px; }
    .dash-page-title { font-size: 13px; }

    /* Footer */
    footer { padding: 32px 16px; }
    .footer-logo-text { font-size: 14px; }
    .footer-copy { font-size: 12px; }

    /* Modal */
    .modal-box { padding: 24px 16px 28px; }
    .modal-title { font-size: 17px; }
    .btn-save { padding: 12px; font-size: 14px; }

    /* Help modal tabs */
    .help-tab { font-size: 11px; padding: 10px 7px; }
    .help-section-title { font-size: 16px; }
    .help-step { padding: 12px 12px; gap: 10px; }
    .help-step-title { font-size: 13px; }
    .help-step-desc { font-size: 12px; }

    /* Palette */
    .palette-search { padding: 14px 14px; }
    .palette-input { font-size: 15px; }
  }

  /* ── 2XS: max 360px (very small phones) ─────── */
  @media (max-width: 360px) {
    .hero-h1 { font-size: 26px; }
    .btn-hero { font-size: 14px; padding: 12px 20px; }
    .section { padding: 48px 12px; }
    .session-card { padding: 14px 12px; }
    .modal-box { padding: 20px 12px 24px; }
    .dash-topbar-inner { padding: 8px; }
    .hero-badge { font-size: 9px; padding: 3px 8px; }
  }

  /* ── Landscape phone ─────────────────────────── */
  @media (max-height: 500px) and (max-width: 900px) and (orientation: landscape) {
    #hero { min-height: auto; padding: 70px 24px 36px; }
    .hero-h1 { font-size: 28px; }
    .hero-sub { font-size: 14px; margin-bottom: 16px; }
    .tab-pills { display: none; }
    .hero-ctas { flex-direction: row; gap: 10px; }
    .btn-hero, .btn-hero-outline { width: auto; }
  }

  /* ── High-DPI (Retina) ───────────────────────── */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .session-card, .feature-card, .audience-card { border-width: 0.5px; }
    .search-input, .form-input, .form-textarea { border-width: 1px; }
  }

  /* ── Prefers reduced motion ──────────────────── */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
    #hero-canvas { display: none; }
    .hero-orb { display: none; }
    .hero-grid { display: block; opacity: 0.5; }
  }
</style>
</head>
<body>

<!-- ═══════════════════════════════════════ LANDING PAGE ═══════════════════════════════════════ -->
<div id="page-landing">

<!-- ═══════════════════════════════════════ NAV ═══════════════════════════════════════ -->
<nav id="main-nav">
  <div class="nav-inner">
    <a class="nav-logo" onclick="scrollToSection('hero')">
      <div class="nav-logo-box">
        <!-- Brain icon -->
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#FAFAFA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/>
          <path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/>
          <path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"/>
          <path d="M17.599 6.5a3 3 0 0 0 .399-1.375"/>
          <path d="M6.003 5.125A3 3 0 0 0 6.401 6.5"/>
          <path d="M3.477 10.896a4 4 0 0 1 .585-.396"/>
          <path d="M19.938 10.5a4 4 0 0 1 .585.396"/>
          <path d="M6 18a4 4 0 0 1-1.967-.516"/>
          <path d="M19.967 17.484A4 4 0 0 1 18 18"/>
        </svg>
      </div>
      <span class="nav-logo-text">Deep-Work</span>
    </a>

    <div class="nav-links">
      <button class="nav-link" onclick="scrollToSection('features')">Features</button>
      <button class="nav-link" onclick="scrollToSection('how-it-works')">How It Works</button>
      <button class="nav-link" onclick="scrollToSection('for-whom')">Who It's For</button>
      <button class="nav-link" onclick="scrollToSection('privacy')">Privacy</button>
      <button class="nav-link" onclick="scrollToSection('faq')">FAQ</button>
    </div>

    <button class="btn-primary" onclick="showPage('dashboard')">Launch App</button>
  </div>
</nav>

<!-- ═══════════════════════════════════════ HERO ═══════════════════════════════════════ -->
<section id="hero">
  <!-- Animated canvas: floating particles + connecting lines -->
  <canvas id="hero-canvas"></canvas>

  <!-- Soft ambient orbs -->
  <div class="hero-orb" style="width:500px;height:500px;background:radial-gradient(circle,rgba(0,0,0,0.035) 0%,transparent 70%);top:-100px;left:-150px;animation:orb-drift-1 18s ease-in-out infinite;"></div>
  <div class="hero-orb" style="width:400px;height:400px;background:radial-gradient(circle,rgba(0,0,0,0.03) 0%,transparent 70%);bottom:-80px;right:-100px;animation:orb-drift-2 22s ease-in-out infinite;"></div>
  <div class="hero-orb" style="width:300px;height:300px;background:radial-gradient(circle,rgba(0,0,0,0.025) 0%,transparent 70%);top:40%;left:60%;animation:orb-drift-3 16s ease-in-out infinite;"></div>

  <div class="hero-fade"></div>
  <div class="hero-content">
    <div class="hero-anim-1">
      <div class="hero-badge">
        <span class="badge-dot"></span>
        LOCAL ONLY
      </div>
    </div>

    <h1 class="hero-h1 hero-anim-2">
      Freeze your tabs.<br>
      <span>Clear your mind.</span>
    </h1>

    <p class="hero-sub hero-anim-3">
      The local-only session manager. Save 50+ tabs into a single <strong>Work Brain</strong> file.<br>
      100% Private. 0% Server. No account required.
    </p>

    <div class="hero-ctas hero-anim-4">
      <button class="btn-hero" onclick="showPage('dashboard')">Start Deep Work →</button>
      <button class="btn-hero-outline" onclick="openPalette()">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="6" height="6" rx="1"/><rect x="14" y="4" width="6" height="6" rx="1"/><rect x="4" y="14" width="6" height="6" rx="1"/><rect x="14" y="14" width="6" height="6" rx="1"/></svg>
        Search URLs
        <kbd>⌘K</kbd>
      </button>
    </div>

    <div class="hero-anim-4">
      <div class="tab-pills">
        <div class="tab-pill">Research</div>
        <div class="tab-pill">Docs</div>
        <div class="tab-pill">GitHub</div>
        <div class="tab-pill">Figma</div>
        <div class="tab-pill">Slack</div>
      </div>
      <div class="brain-merge">
        <div class="merge-line merge-line-left"></div>
        <div class="brain-chip">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/>
            <path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/>
          </svg>
          Work Brain
        </div>
        <div class="merge-line merge-line-right"></div>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════ HOW IT WORKS ═══════════════════════════════════════ -->
<section id="how-it-works" class="section section-white">
  <div class="section-inner">
    <div class="section-header">
      <div class="section-label">How It Works</div>
      <h2 class="section-h2">Three steps. Zero friction.</h2>
    </div>
    <div class="steps-grid">
      <div class="step-card" style="animation-delay:0.1s">
        <div class="step-card-header">
          <div class="step-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
          </div>
          <span class="step-num">01</span>
        </div>
        <h3 class="step-title">Capture</h3>
        <p class="step-desc">One click to grab all URLs in your current session. Paste them in or type manually -- your call.</p>
      </div>
      <div class="step-card" style="animation-delay:0.22s">
        <div class="step-card-header">
          <div class="step-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
          </div>
          <span class="step-num">02</span>
        </div>
        <h3 class="step-title">Categorize</h3>
        <p class="step-desc">Name your session (e.g. 'Market Research') and add color-coded tags for instant recognition.</p>
      </div>
      <div class="step-card" style="animation-delay:0.34s">
        <div class="step-card-header">
          <div class="step-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"/><polyline points="23 20 23 14 17 14"/><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/></svg>
          </div>
          <span class="step-num">03</span>
        </div>
        <h3 class="step-title">Resume</h3>
        <p class="step-desc">One click to reopen all links exactly where you left off. Zero loading screens. Zero friction.</p>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════ FEATURES ═══════════════════════════════════════ -->
<section id="features" class="section section-gray">
  <div class="section-inner">
    <div class="section-header">
      <div class="section-label">Features</div>
      <h2 class="section-h2">Everything you need. Nothing else.</h2>
    </div>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/></svg>
        </div>
        <div class="feature-title">Memory Saver</div>
        <div class="feature-desc">Closing tabs via the app frees up system RAM instantly.</div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </div>
        <div class="feature-title">Smart Search</div>
        <div class="feature-desc">⌘K command palette to search through all saved URLs.</div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="17" x2="12" y2="17.01"/><path d="M3.34 15A10 10 0 1 1 20.66 15"/></svg>
        </div>
        <div class="feature-title">Template Sessions</div>
        <div class="feature-desc">Pin a "Morning Routine" that never gets deleted.</div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
        </div>
        <div class="feature-title">JSON Backup</div>
        <div class="feature-desc">Export &amp; restore your entire brain as a portable file.</div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        </div>
        <div class="feature-title">Zero Tracking</div>
        <div class="feature-desc">No telemetry. No analytics. No cookies. Ever.</div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="1" y1="1" x2="23" y2="23"/><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"/><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"/><path d="M10.71 5.05A16 16 0 0 1 22.56 9"/><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" y1="20" x2="12.01" y2="20"/></svg>
        </div>
        <div class="feature-title">Offline First</div>
        <div class="feature-desc">Works without internet. Your data is already on-device.</div>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════ WHO IT'S FOR ═══════════════════════════════════════ -->
<section id="for-whom" class="section section-white">
  <div class="section-inner">
    <div class="section-header">
      <div class="section-label">Who It's For</div>
      <h2 class="section-h2">Built for people who think in tabs.</h2>
      <p style="font-size:17px;color:#6B6B6B;line-height:1.65;margin-top:14px;max-width:560px;margin-left:auto;margin-right:auto">
        If you've ever lost a research session, crashed a browser with 80 tabs, or wished you could just <em>pause your brain</em> -- this is for you.
      </p>
    </div>

    <div class="audience-grid">

      <!-- Developers -->
      <div class="audience-card" style="animation-delay:0.05s">
        <div class="audience-card-top">
          <div class="audience-icon-wrap">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#0A0A0A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
          </div>
          <div>
            <div class="audience-role">Developers</div>
            <div class="audience-tagline">Stack Overflow marathons & doc dives</div>
          </div>
        </div>
        <p class="audience-desc">You open 40 tabs for one bug fix. Stack Overflow, GitHub issues, MDN docs, StackBlitz -- then Chrome crashes and it's all gone.</p>
        <div class="audience-pain">
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Save your entire debug session in one click
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Switch between projects without losing context
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            No cloud sync means no privacy concerns
          </div>
        </div>
        <div class="audience-accent-line"></div>
      </div>

      <!-- Researchers -->
      <div class="audience-card" style="animation-delay:0.12s">
        <div class="audience-card-top">
          <div class="audience-icon-wrap">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#0A0A0A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          </div>
          <div>
            <div class="audience-role">Researchers</div>
            <div class="audience-tagline">Academic & market deep-dives</div>
          </div>
        </div>
        <p class="audience-desc">You spend hours curating sources, whitepapers, competitor pages and reports. One accidental window close and weeks of curation disappears.</p>
        <div class="audience-pain">
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Freeze a research session mid-flow
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Tag sessions by topic or project phase
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Export sources as a portable JSON file
          </div>
        </div>
        <div class="audience-accent-line"></div>
      </div>

      <!-- Designers -->
      <div class="audience-card" style="animation-delay:0.19s">
        <div class="audience-card-top">
          <div class="audience-icon-wrap">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#0A0A0A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M4.93 4.93a10 10 0 0 0 0 14.14"/></svg>
          </div>
          <div>
            <div class="audience-role">Designers</div>
            <div class="audience-tagline">Moodboards & inspiration hoards</div>
          </div>
        </div>
        <p class="audience-desc">Dribbble, Behance, Awwwards, Mobbin -- you're always collecting. But inspiration windows pile up until your MacBook fan sounds like a jet engine.</p>
        <div class="audience-pain">
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Save inspiration sessions by design style
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Resume your moodboard exactly as you left it
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Free RAM by closing all tabs with one click
          </div>
        </div>
        <div class="audience-accent-line"></div>
      </div>

      <!-- Writers & Journalists -->
      <div class="audience-card" style="animation-delay:0.26s">
        <div class="audience-card-top">
          <div class="audience-icon-wrap">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#0A0A0A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
          </div>
          <div>
            <div class="audience-role">Writers</div>
            <div class="audience-tagline">Journalists, bloggers & content creators</div>
          </div>
        </div>
        <p class="audience-desc">Every article needs 20 reference tabs. Every story has its own browser window. Tracking which tabs belong to which story is a nightmare.</p>
        <div class="audience-pain">
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            One named session per article or story
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Come back to sources days or weeks later
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Copy all URLs to share with an editor
          </div>
        </div>
        <div class="audience-accent-line"></div>
      </div>

      <!-- Students -->
      <div class="audience-card" style="animation-delay:0.33s">
        <div class="audience-card-top">
          <div class="audience-icon-wrap">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#0A0A0A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
          </div>
          <div>
            <div class="audience-role">Students</div>
            <div class="audience-tagline">Term papers & exam cramming</div>
          </div>
        </div>
        <p class="audience-desc">One browser session for Econ, one for History, one for your thesis. Keeping these separate without losing anything feels impossible.</p>
        <div class="audience-pain">
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Separate sessions per subject or deadline
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            No account needed -- just open and go
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Export to share research links with classmates
          </div>
        </div>
        <div class="audience-accent-line"></div>
      </div>

      <!-- Entrepreneurs -->
      <div class="audience-card" style="animation-delay:0.4s">
        <div class="audience-card-top">
          <div class="audience-icon-wrap">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#0A0A0A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
          </div>
          <div>
            <div class="audience-role">Entrepreneurs</div>
            <div class="audience-tagline">Founders, PMs & side-project builders</div>
          </div>
        </div>
        <p class="audience-desc">Competitor analysis, investor decks, product roadmaps, hiring pages -- you context-switch 50 times a day across 5 completely different mental workspaces.</p>
        <div class="audience-pain">
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Instant context switching between workspaces
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Pin a "Daily Dashboard" that's always ready
          </div>
          <div class="audience-pain-item">
            <div class="pain-check"><svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="#FFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
            Sensitive business data stays off the cloud
          </div>
        </div>
        <div class="audience-accent-line"></div>
      </div>

    </div>

    <!-- Not For Box -->
    <div class="not-for-box">
      <div class="not-for-icon">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#6B6B6B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/></svg>
      </div>
      <div>
        <div class="not-for-title">Probably not for you if you...</div>
        <div class="not-for-tags">
          <span class="not-for-tag">Only open 3–4 tabs ever</span>
          <span class="not-for-tag">Need real-time team sync</span>
          <span class="not-for-tag">Want cloud backup automatically</span>
          <span class="not-for-tag">Use a browser with built-in tab groups</span>
          <span class="not-for-tag">Close browser after every session</span>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- ═══════════════════════════════════════ PHILOSOPHY ═══════════════════════════════════════ -->
<section class="section section-dark">
  <div class="section-inner-sm" style="text-align:center">
    <div class="section-label section-label-dark" style="margin-bottom:20px">Our Philosophy</div>
    <h2 class="section-h2 section-h2-white" style="margin-bottom:24px;line-height:1.15">
      The cloud is crowded.<br>
      <span style="color:#6B6B6B">We built a Ghost App.</span>
    </h2>
    <p style="font-size:18px;color:#5A5A5A;line-height:1.7">
      Deep-Work lives in your browser RAM and local disk. No accounts. No tracking. No "Tab Anxiety." Just your work, exactly as you left it.
    </p>
    <div class="phil-badges">
      <div class="phil-badge">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        No Accounts
      </div>
      <div class="phil-badge">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="1" y1="1" x2="23" y2="23"/><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"/><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"/><path d="M10.71 5.05A16 16 0 0 1 22.56 9"/><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" y1="20" x2="12.01" y2="20"/></svg>
        No Server
      </div>
      <div class="phil-badge">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        No Tracking
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════ PRIVACY ═══════════════════════════════════════ -->
<section id="privacy" class="section section-gray">
  <div class="section-inner-sm" style="text-align:center">
    <div class="section-label" style="margin-bottom:12px">Privacy</div>
    <h2 class="section-h2">100% Private. Always.</h2>
    <p style="font-size:16px;color:#6B6B6B;line-height:1.7;margin-top:16px">
      Your sessions are stored exclusively in your browser's local storage. Nothing is transmitted to any server, ever. You can verify this by opening your browser's network inspector.
    </p>
    <div class="privacy-box">
      <div class="privacy-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0A0A0A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
      </div>
      <div>
        <div class="privacy-title">Data stays on your device</div>
        <div class="privacy-desc">Stored in localStorage (IndexedDB-compatible). No cookies. No external requests. No analytics.</div>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════ FAQ ═══════════════════════════════════════ -->
<section id="faq" class="section section-white">
  <div class="section-inner-sm">
    <div class="section-header">
      <div class="section-label">FAQ</div>
      <h2 class="section-h2">Common questions</h2>
    </div>
    <div id="faq-list"></div>
  </div>
</section>

<!-- ═══════════════════════════════════════ FOOTER ═══════════════════════════════════════ -->
<footer>
  <div class="footer-inner">
    <div class="footer-logo">
      <div class="footer-logo-box">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="#0A0A0A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/></svg>
      </div>
      <span class="footer-logo-text">Deep-Work</span>
    </div>
    <p class="footer-copy">Built for the Open Web. No Cookies. No Tracking.</p>
    <div class="footer-links">
      <button class="footer-link" onclick="scrollToSection('features')">Features</button>
      <button class="footer-link" onclick="scrollToSection('privacy')">Privacy</button>
      <button class="footer-link" onclick="scrollToSection('faq')">FAQ</button>
    </div>
  </div>
</footer>

</div><!-- /#page-landing -->

<!-- ═══════════════════════════════════════ DASHBOARD PAGE ═══════════════════════════════════════ -->
<div id="page-dashboard">

  <!-- Top Bar -->
  <div class="dash-topbar">
    <div class="dash-topbar-inner">
      <div class="dash-topbar-left">
        <button class="btn-back" onclick="showPage('landing')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
          Back
        </button>
        <div style="display:flex;align-items:center;gap:8px;">
          <div style="width:24px;height:24px;background:#0A0A0A;border-radius:6px;display:flex;align-items:center;justify-content:center;">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="#FAFAFA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/></svg>
          </div>
          <span class="dash-page-title">Work Brain</span>
        </div>
        <div class="hero-badge" style="margin-bottom:0;">
          <span class="badge-dot"></span>LOCAL ONLY
        </div>
      </div>
      <div class="dash-topbar-actions">
        <button class="btn-secondary" onclick="openPalette()">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <span>Search</span> <kbd style="font-size:10px;">⌘K</kbd>
        </button>
        <button class="btn-secondary" onclick="exportSessions()">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          <span>Export</span>
        </button>
        <button class="btn-secondary" onclick="document.getElementById('import-file').click()">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span>Import</span>
        </button>
        <input type="file" id="import-file" accept=".json" style="display:none" onchange="importSessions(event)">
        <button class="btn-primary" style="display:flex;align-items:center;gap:6px;padding:9px 16px" onclick="openNewModal()">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
          New Session
        </button>
        <button class="btn-secondary" onclick="openHelpModal()" title="How to use" style="padding:9px 12px;font-weight:700;font-size:15px;gap:0;min-width:36px;justify-content:center;">
          ?
        </button>
      </div>
    </div>
  </div>

  <!-- Body -->
  <div class="dash-body page-animate" id="dash-body">
    <div class="dash-stats" id="dash-stats" style="margin-bottom:24px;"></div>
    <div class="search-wrap">
      <span class="search-icon">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#C0C0C0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      </span>
      <input class="search-input" id="session-search" placeholder="Filter sessions by name, URL or tag..." oninput="renderSessions()" />
    </div>
    <div class="sessions-grid" id="sessions-grid"></div>
    <div id="empty-state" class="empty-state" style="display:none">
      <div class="empty-icon">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/></svg>
      </div>
      <div class="empty-title">No sessions yet</div>
      <div class="empty-sub">Create your first Work Brain session</div>
      <button class="btn-primary" onclick="openNewModal()">+ New Session</button>
    </div>
  </div>

</div><!-- /#page-dashboard -->

<!-- ═══════════════════════════════════════ NEW SESSION MODAL ═══════════════════════════════════════ -->
<div id="new-modal" class="modal-overlay" style="display:none" onclick="handleModalOverlay(event)">
  <div class="modal-box">
    <div class="modal-header">
      <h2 class="modal-title">New Session</h2>
      <button class="modal-close" onclick="closeNewModal()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>
    <label class="form-label">SESSION NAME</label>
    <input class="form-input" id="modal-title" placeholder="e.g. Market Research, Side Project..." />
    <label class="form-label">URLS <span style="font-weight:400;text-transform:none;letter-spacing:0">(one per line)</span></label>
    <textarea class="form-textarea" id="modal-urls" rows="5" placeholder="https://example.com&#10;https://another-site.com"></textarea>
    <label class="form-label" style="margin-bottom:8px">TAG <span style="font-weight:400;text-transform:none;letter-spacing:0">(optional)</span></label>
    <div class="tag-row" style="margin-bottom:24px">
      <input class="tag-input" id="modal-tag-name" placeholder="Tag name" />
      <div class="color-swatches" id="color-swatches"></div>
    </div>
    <button class="btn-save" id="modal-save-btn" onclick="saveNewSession()">Save Session</button>
  </div>
</div>

<!-- ═══════════════════════════════════════ HELP MODAL ═══════════════════════════════════════ -->
<div id="help-modal" class="modal-overlay" style="display:none" onclick="handleHelpOverlay(event)">
  <div class="modal-box" style="max-width:580px;padding:0;overflow:hidden;">

    <!-- Header -->
    <div style="padding:28px 28px 20px;border-bottom:1px solid #F0F0F0;display:flex;justify-content:space-between;align-items:center;">
      <div>
        <div style="font-size:11px;font-weight:700;letter-spacing:0.1em;color:#B0B0B0;text-transform:uppercase;margin-bottom:4px;">Guide</div>
        <h2 style="font-size:20px;font-weight:800;letter-spacing:-0.03em;color:#0A0A0A;margin:0;">How to use the Dashboard</h2>
      </div>
      <button class="modal-close" onclick="closeHelpModal()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>

    <!-- Tabs -->
    <div style="display:flex;border-bottom:1px solid #F0F0F0;padding:0 28px;">
      <button class="help-tab active" id="htab-search" onclick="switchHelpTab('search')">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        Search
      </button>
      <button class="help-tab" id="htab-export" onclick="switchHelpTab('export')">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        Export
      </button>
      <button class="help-tab" id="htab-import" onclick="switchHelpTab('import')">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        Import
      </button>
      <button class="help-tab" id="htab-newsession" onclick="switchHelpTab('newsession')">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        New Session
      </button>
    </div>

    <!-- Tab Content -->
    <div style="padding:24px 28px;max-height:400px;overflow-y:auto;">

      <!-- SEARCH -->
      <div id="hcontent-search" class="help-content">
        <div class="help-hero-icon" style="background:#EFF6FF;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </div>
        <h3 class="help-section-title">Search &amp; ⌘K Command Palette</h3>
        <p class="help-desc">Two ways to search through all your saved sessions and URLs instantly.</p>

        <div class="help-steps">
          <div class="help-step">
            <div class="help-step-num">1</div>
            <div>
              <div class="help-step-title">Filter bar (inline search)</div>
              <div class="help-step-desc">The search bar at the top of your sessions filters cards in real time as you type. It matches against session names, URLs, and tags.</div>
            </div>
          </div>
          <div class="help-step">
            <div class="help-step-num">2</div>
            <div>
              <div class="help-step-title">Press <kbd style="font-size:11px;background:#F5F5F5;padding:2px 7px;border-radius:5px;border:1px solid #E0E0E0;color:#0A0A0A;">⌘K</kbd> or click Search</div>
              <div class="help-step-desc">Opens the Command Palette -- a full-screen search that searches every URL inside every session. Click any result to open that link directly in a new tab.</div>
            </div>
          </div>
          <div class="help-step">
            <div class="help-step-num">3</div>
            <div>
              <div class="help-step-title">Press <kbd style="font-size:11px;background:#F5F5F5;padding:2px 7px;border-radius:5px;border:1px solid #E0E0E0;color:#0A0A0A;">ESC</kbd> to close</div>
              <div class="help-step-desc">Hit Escape at any time to dismiss the palette and return to the dashboard.</div>
            </div>
          </div>
        </div>

        <div class="help-tip">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
          <span><strong>Tip:</strong> Search works even inside long URLs -- try typing a keyword like "github" or "notion" to find specific sites across all your sessions.</span>
        </div>
      </div>

      <!-- EXPORT -->
      <div id="hcontent-export" class="help-content" style="display:none">
        <div class="help-hero-icon" style="background:#F0FDF4;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#166534" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        </div>
        <h3 class="help-section-title">Export -- Back Up Your Sessions</h3>
        <p class="help-desc">Export saves all your sessions into a single <code style="background:#F5F5F5;padding:2px 6px;border-radius:5px;font-size:12px;">deepwork-backup.json</code> file you can keep anywhere.</p>

        <div class="help-steps">
          <div class="help-step">
            <div class="help-step-num">1</div>
            <div>
              <div class="help-step-title">Click the <strong>Export</strong> button</div>
              <div class="help-step-desc">Your browser immediately downloads a file called <code style="background:#F5F5F5;padding:1px 5px;border-radius:4px;font-size:12px;">deepwork-backup.json</code> to your Downloads folder.</div>
            </div>
          </div>
          <div class="help-step">
            <div class="help-step-num">2</div>
            <div>
              <div class="help-step-title">Save it somewhere safe</div>
              <div class="help-step-desc">Move it to a folder, Google Drive, USB stick, or email it to yourself. The file contains all session names, URLs, tags, and pin status.</div>
            </div>
          </div>
          <div class="help-step">
            <div class="help-step-num">3</div>
            <div>
              <div class="help-step-title">Use it to restore or share</div>
              <div class="help-step-desc">This backup can be imported back into Deep-Work on any device or browser using the Import button.</div>
            </div>
          </div>
        </div>

        <div class="help-tip" style="background:#F0FDF4;border-color:#BBF7D0;">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#166534" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
          <span><strong>Always export before clearing browser data.</strong> Since everything is stored locally, clearing browser storage will erase your sessions permanently unless you have a backup.</span>
        </div>
      </div>

      <!-- IMPORT -->
      <div id="hcontent-import" class="help-content" style="display:none">
        <div class="help-hero-icon" style="background:#FFF7ED;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#9A3412" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        </div>
        <h3 class="help-section-title">Import -- Restore a Backup</h3>
        <p class="help-desc">Import loads sessions back from a previously exported <code style="background:#F5F5F5;padding:2px 6px;border-radius:5px;font-size:12px;">.json</code> backup file.</p>

        <div class="help-steps">
          <div class="help-step">
            <div class="help-step-num">1</div>
            <div>
              <div class="help-step-title">Click the <strong>Import</strong> button</div>
              <div class="help-step-desc">A file picker dialog opens in your browser. Navigate to your <code style="background:#F5F5F5;padding:1px 5px;border-radius:4px;font-size:12px;">deepwork-backup.json</code> file and select it.</div>
            </div>
          </div>
          <div class="help-step">
            <div class="help-step-num">2</div>
            <div>
              <div class="help-step-title">Sessions restore instantly</div>
              <div class="help-step-desc">All sessions from the backup file are loaded into your dashboard immediately -- including names, URLs, tags, and which sessions are pinned.</div>
            </div>
          </div>
          <div class="help-step">
            <div class="help-step-num">3</div>
            <div>
              <div class="help-step-title">Works across devices</div>
              <div class="help-step-desc">Export on your work laptop, import on your home PC. Deep-Work uses a simple, portable JSON format that works anywhere.</div>
            </div>
          </div>
        </div>

        <div class="help-tip" style="background:#FFF7ED;border-color:#FED7AA;">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#9A3412" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
          <span><strong>Note:</strong> Importing replaces your current sessions with those in the backup file. Export your current data first if you want to keep it.</span>
        </div>
      </div>

      <!-- NEW SESSION -->
      <div id="hcontent-newsession" class="help-content" style="display:none">
        <div class="help-hero-icon" style="background:#F5F5F5;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#0A0A0A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        </div>
        <h3 class="help-section-title">New Session -- Save Your Tabs</h3>
        <p class="help-desc">Create a named group of URLs you can reopen anytime with a single click.</p>

        <div class="help-steps">
          <div class="help-step">
            <div class="help-step-num">1</div>
            <div>
              <div class="help-step-title">Click <strong>+ New Session</strong> or press the <kbd style="font-size:11px;background:#F5F5F5;padding:2px 7px;border-radius:5px;border:1px solid #E0E0E0;color:#0A0A0A;">+</kbd> FAB button</div>
              <div class="help-step-desc">A modal form opens. Give your session a clear name like "Market Research" or "Morning Dashboard".</div>
            </div>
          </div>
          <div class="help-step">
            <div class="help-step-num">2</div>
            <div>
              <div class="help-step-title">Paste your URLs (one per line)</div>
              <div class="help-step-desc">Copy the URLs from your open tabs and paste them in the text area. Each line becomes one saved tab. Only URLs starting with <code style="background:#F5F5F5;padding:1px 5px;border-radius:4px;font-size:12px;">http</code> are saved.</div>
            </div>
          </div>
          <div class="help-step">
            <div class="help-step-num">3</div>
            <div>
              <div class="help-step-title">Add a tag &amp; color (optional)</div>
              <div class="help-step-desc">Tag your session with a label like "Work", "Research", or "Design" and pick a color swatch for visual recognition at a glance.</div>
            </div>
          </div>
          <div class="help-step">
            <div class="help-step-num">4</div>
            <div>
              <div class="help-step-title">Click <strong>Save Session</strong></div>
              <div class="help-step-desc">The session is saved instantly to your browser's local storage -- no server, no account needed.</div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Footer -->
    <div style="padding:16px 28px;border-top:1px solid #F0F0F0;display:flex;justify-content:space-between;align-items:center;background:#FAFAFA;">
      <div style="font-size:12px;color:#B0B0B0;">Deep-Work -- 100% local, 0% cloud</div>
      <button onclick="closeHelpModal()" class="btn-primary" style="padding:9px 22px;font-size:13px;">Got it →</button>
    </div>

  </div>
</div>

<!-- ═══════════════════════════════════════ COMMAND PALETTE ═══════════════════════════════════════ -->
<div id="palette-overlay" style="display:none" onclick="handlePaletteOverlay(event)">
  <div class="palette-box">
    <div class="palette-search">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9B9B9B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <input class="palette-input" id="palette-input" placeholder="Search URLs, sessions..." oninput="renderPaletteResults()" />
      <kbd>ESC</kbd>
    </div>
    <div class="palette-results" id="palette-results"></div>
  </div>
</div>

<!-- ═══════════════════════════════════════ TOAST ═══════════════════════════════════════ -->
<div id="toast">
  <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#22C55E" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
  <span id="toast-msg"></span>
</div>

<!-- ═══════════════════════════════════════ FAB ═══════════════════════════════════════ -->
<button id="fab" onclick="openNewModal()" title="New Session" style="display:none">
  <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
</button>

<!-- ═══════════════════════════════════════ JAVASCRIPT ═══════════════════════════════════════ -->
<script>
// -- Constants ------------------------------------------
const DB_KEY = 'deepwork_sessions_v1';

const TAG_COLORS = [
  { bg: '#F1F3F4', text: '#2D2D2D' },
  { bg: '#F0EFED', text: '#3D3530' },
  { bg: '#F0F0F1', text: '#2A2A2E' },
  { bg: '#F3F3F3', text: '#1A1A1A' },
  { bg: '#FDF6EC', text: '#5C3D11' },
  { bg: '#EFF6FF', text: '#1E3A5F' },
];

const DEMO_SESSIONS = [
  {
    id: 'demo1', title: 'Market Research',
    timestamp: Date.now() - 86400000 * 2,
    tags: [{ name: 'Research', bg: '#EFF6FF', text: '#1E3A5F' }],
    pinned: false,
    urls: ['https://statista.com','https://similarweb.com','https://crunchbase.com','https://techcrunch.com','https://pitchbook.com']
  },
  {
    id: 'demo2', title: 'Morning Routine',
    timestamp: Date.now() - 86400000 * 5,
    tags: [{ name: 'Daily', bg: '#FDF6EC', text: '#5C3D11' }],
    pinned: true,
    urls: ['https://news.ycombinator.com','https://reddit.com/r/programming','https://github.com/notifications','https://linear.app']
  },
  {
    id: 'demo3', title: 'Design Inspiration',
    timestamp: Date.now() - 86400000,
    tags: [{ name: 'Design', bg: '#F1F3F4', text: '#2D2D2D' }],
    pinned: false,
    urls: ['https://dribbble.com','https://behance.net','https://awwwards.com','https://mobbin.com','https://uxarchive.com','https://scrnshts.club']
  }
];

// -- State ----------------------------------------------
let sessions = [];
let selectedColorIdx = 0;
let toastTimer = null;

// -- Storage --------------------------------------------
function loadSessions() {
  try {
    const raw = localStorage.getItem(DB_KEY);
    if (!raw) return null;
    const parsed = JSON.parse(raw);
    return Array.isArray(parsed) ? parsed : null;
  } catch { return null; }
}

function saveSessions() {
  try {
    localStorage.setItem(DB_KEY, JSON.stringify(sessions));
  } catch (e) {
    // localStorage full or unavailable
    console.warn('Deep-Work: Could not save sessions.', e);
  }
}

function generateId() {
  return Math.random().toString(36).slice(2) + Date.now().toString(36);
}

// -- Toast ----------------------------------------------
function showToast(msg) {
  const el = document.getElementById('toast');
  const msgEl = document.getElementById('toast-msg');
  if (toastTimer) clearTimeout(toastTimer);
  msgEl.textContent = msg;
  el.style.animation = 'none';
  el.classList.add('show');
  void el.offsetWidth;
  el.style.animation = 'toastIn 0.3s ease both';
  toastTimer = setTimeout(() => {
    el.style.animation = 'toastOut 0.3s ease forwards';
    setTimeout(() => el.classList.remove('show'), 300);
  }, 2500);
}

// -- Page Navigation ------------------------------------
function showPage(page) {
  const landing = document.getElementById('page-landing');
  const dashboard = document.getElementById('page-dashboard');
  const fab = document.getElementById('fab');

  localStorage.setItem('dw_active_page', page); // persist across refresh

  if (page === 'dashboard') {
    landing.style.display = 'none';
    dashboard.style.display = 'block';
    fab.style.display = 'flex';
    window.scrollTo({ top: 0, behavior: 'instant' });
    if (window._particles) window._particles.pause();
    const body = document.getElementById('dash-body');
    body.style.animation = 'none';
    void body.offsetWidth;
    body.style.animation = 'pageIn 0.35s ease both';
    renderSessions();
    renderStats();
  } else {
    dashboard.style.display = 'none';
    landing.style.display = 'block';
    fab.style.display = 'none';
    window.scrollTo({ top: 0, behavior: 'instant' });
    if (window._particles) window._particles.resume();
  }
}

// -- Scroll ---------------------------------------------
function scrollToSection(id) {
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// -- Render Stats ---------------------------------------
function renderStats() {
  const total = sessions.reduce((a, s) => a + s.urls.length, 0);
  const pinned = sessions.filter(s => s.pinned).length;
  document.getElementById('dash-stats').innerHTML = [
    { label: 'Sessions', value: sessions.length },
    { label: 'Total Tabs', value: total },
    { label: 'Pinned', value: pinned },
  ].map(s => `
    <div class="stat-pill">
      <span class="stat-num">${s.value}</span>
      <span class="stat-label">${s.label}</span>
    </div>
  `).join('');
}

// -- Render Sessions ------------------------------------
function renderSessions() {
  const query = (document.getElementById('session-search').value || '').toLowerCase();
  const grid = document.getElementById('sessions-grid');
  const empty = document.getElementById('empty-state');

  let filtered = sessions.filter(s => {
    if (!query) return true;
    return s.title.toLowerCase().includes(query)
      || s.urls.some(u => u.toLowerCase().includes(query))
      || (s.tags || []).some(t => t.name.toLowerCase().includes(query));
  }).sort((a, b) => (b.pinned ? 1 : 0) - (a.pinned ? 1 : 0) || b.timestamp - a.timestamp);

  if (filtered.length === 0) {
    grid.style.display = 'none';
    empty.style.display = 'block';
    return;
  }
  grid.style.display = 'grid';
  empty.style.display = 'none';

  grid.innerHTML = filtered.map((s, i) => buildCard(s, i)).join('');
}

function buildCard(s, i) {
  const date = new Date(s.timestamp).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
  const pinClass = s.pinned ? 'pinned' : '';
  const pinTitle = s.pinned ? 'Unpin' : 'Pin';

  const tags = (s.tags || []).map(t =>
    `<span class="card-tag" style="background:${t.bg};color:${t.text}">${t.name}</span>`
  ).join('');

  // Show first 4 URLs by default, rest hidden
  const SHOW_LIMIT = 4;
  const visibleUrls = s.urls.slice(0, SHOW_LIMIT);
  const hiddenCount = s.urls.length - SHOW_LIMIT;

  const urlRowsHtml = s.urls.map((u, idx) => {
    const display = u.replace(/^https?:\/\/(www\.)?/, '').replace(/\/$/, '');
    const safeUrl = u.replace(/"/g, '&quot;');
    const hidden = idx >= SHOW_LIMIT ? `style="display:none" class="url-row url-extra-${s.id}"` : `class="url-row"`;
    return `
      <div ${hidden} id="urlrow-${s.id}-${idx}">
        <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="#C0C0C0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink:0">
          <circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/>
          <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
        </svg>
        <span class="url-row-text" title="${safeUrl}">${escHtml(display.slice(0, 52))}${display.length > 52 ? '...' : ''}</span>
        <div class="url-row-actions">
          <button class="url-open-btn" onclick="event.stopPropagation();window.open('${safeUrl}','_blank')" title="Open in new tab">
            <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
            Open
          </button>
          <button class="url-del-btn" onclick="event.stopPropagation();deleteUrl('${s.id}',${idx})" title="Remove this URL">
            <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          </button>
        </div>
      </div>
    `;
  }).join('');

  const showMoreBtn = hiddenCount > 0 ? `
    <button class="url-show-more" id="showmore-${s.id}" onclick="toggleShowMore('${s.id}', ${s.urls.length}, ${SHOW_LIMIT})">
      <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
      <span id="showmore-label-${s.id}">Show ${hiddenCount} more link${hiddenCount > 1 ? 's' : ''}</span>
    </button>` : '';

  const pinCorner = s.pinned ? '<div class="pin-corner"></div>' : '';
  const urlsJson = JSON.stringify(s.urls).replace(/"/g, '&quot;');

  return `
    <div class="session-card" style="animation-delay:${i * 0.06}s" id="card-${s.id}">
      ${pinCorner}

      <div class="card-header">
        <div>
          <div class="card-title">${escHtml(s.title)}</div>
          <div class="card-date">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="#9B9B9B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
            <span>${date}</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="card-btn ${pinClass}" onclick="togglePin('${s.id}')" title="${pinTitle}">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="${s.pinned ? '#0A0A0A' : 'none'}" stroke="${s.pinned ? '#0A0A0A' : '#9B9B9B'}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="17" x2="12" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/></svg>
          </button>
          <button class="card-btn" onclick="copyUrls(${urlsJson})" title="Copy all URLs">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
          </button>
          <button class="card-btn" onclick="deleteSession('${s.id}')" title="Delete">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/></svg>
          </button>
        </div>
      </div>

      ${tags ? `<div class="card-tags">${tags}</div>` : ''}

      <div class="url-list">
        ${urlRowsHtml}
        ${showMoreBtn}
      </div>

      <div class="card-footer">
        <span class="card-count">${s.urls.length} tab${s.urls.length !== 1 ? 's' : ''}</span>
      </div>
    </div>
  `;
}

function escHtml(str) {
  return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function toggleShowMore(id, total, limit) {
  const extras = document.querySelectorAll(`.url-extra-${id}`);
  const btn = document.getElementById(`showmore-${id}`);
  const label = document.getElementById(`showmore-label-${id}`);
  const isHidden = extras[0] && extras[0].style.display === 'none';
  const hiddenCount = total - limit;
  extras.forEach(el => {
    el.style.display = isHidden ? 'flex' : 'none';
  });
  if (isHidden) {
    label.textContent = 'Show less';
    btn.querySelector('svg').style.transform = 'rotate(180deg)';
  } else {
    label.textContent = `Show ${hiddenCount} more link${hiddenCount > 1 ? 's' : ''}`;
    btn.querySelector('svg').style.transform = 'rotate(0deg)';
  }
}

function deleteUrl(sessionId, urlIdx) {
  const session = sessions.find(s => s.id === sessionId);
  if (!session) return;

  // Animate the row out
  const row = document.getElementById(`urlrow-${sessionId}-${urlIdx}`);
  if (row) {
    row.style.transition = 'all 0.2s ease';
    row.style.opacity = '0';
    row.style.transform = 'translateX(10px)';
    row.style.maxHeight = row.offsetHeight + 'px';
    setTimeout(() => { row.style.maxHeight = '0'; row.style.padding = '0'; }, 200);
  }

  setTimeout(() => {
    session.urls.splice(urlIdx, 1);
    saveSessions();
    renderSessions();
    renderStats();
    showToast('URL removed');
  }, 320);
}


function deleteSession(id) {
  const card = document.getElementById('card-' + id);
  if (card) {
    card.style.transition = 'all 0.28s ease';
    card.style.opacity = '0';
    card.style.transform = 'scale(0.95) translateY(-8px)';
  }
  setTimeout(() => {
    sessions = sessions.filter(s => s.id !== id);
    saveSessions();
    renderSessions();
    renderStats();
    showToast('Session removed');
  }, 280);
}

function togglePin(id) {
  sessions = sessions.map(s => s.id === id ? { ...s, pinned: !s.pinned } : s);
  saveSessions();
  renderSessions();
  renderStats();
  showToast(sessions.find(s => s.id === id)?.pinned ? 'Session pinned!' : 'Session unpinned');
}

function resumeSession(urls) {
  if (!urls || urls.length === 0) { showToast('No URLs in this session'); return; }
  if (urls.length === 1) { window.open(urls[0], '_blank'); showToast('Opened 1 tab'); return; }

  // Test if popups are allowed
  var test = window.open('about:blank', '_blank');
  if (!test || test.closed || typeof test.closed === 'undefined') {
    showLinksModal(urls);
    return;
  }
  test.close();

  // Open all tabs with a tiny gap so browser doesn't throttle
  var count = 0;
  function openOne(index) {
    if (index >= urls.length) { showToast('All ' + count + ' tabs opened!'); return; }
    var w = window.open(urls[index], '_blank');
    if (w) count++;
    setTimeout(function() { openOne(index + 1); }, 80);
  }
  openOne(0);
  showToast('Opening ' + urls.length + ' tabs...');
}

function showLinksModal(urls) {
  var existing = document.getElementById('links-modal');
  if (existing) existing.remove();

  var linksHtml = '';
  for (var i = 0; i < urls.length; i++) {
    var url = urls[i];
    var display = url.replace(/^https?:\/\/(www\.)?/, '').replace(/\/$/, '');
    if (display.length > 55) display = display.slice(0, 55) + '...';
    linksHtml += '<a href="' + url + '" target="_blank" rel="noopener noreferrer"'
      + ' style="display:flex;align-items:center;gap:10px;padding:11px 14px;'
      + 'border-bottom:1px solid #F8F8F8;text-decoration:none;color:#0A0A0A;'
      + 'font-size:13px;font-weight:500;transition:background 0.15s;"'
      + ' onmouseover="this.style.background=\'#F8F8F8\'"'
      + ' onmouseout="this.style.background=\'transparent\'">'
      + '<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#C0C0C0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink:0">'
      + '<circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/>'
      + '<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>'
      + '<span style="flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">' + display + '</span>'
      + '<svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="#C0C0C0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">'
      + '<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>'
      + '<polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>'
      + '</a>';
  }

  var modal = document.createElement('div');
  modal.id = 'links-modal';
  modal.style.cssText = 'position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,0.35);'
    + 'backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;padding:20px;';

  modal.innerHTML = '<div style="background:#fff;border-radius:20px;padding:28px;max-width:480px;width:100%;'
    + 'box-shadow:0 40px 80px rgba(0,0,0,0.2);border:1px solid #E8E8E8;'
    + 'max-height:80vh;display:flex;flex-direction:column;">'

    + '<div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;">'
    + '<div><div style="font-size:17px;font-weight:800;letter-spacing:-0.03em;color:#0A0A0A;margin-bottom:4px;">Open All Tabs</div>'
    + '<div style="font-size:12px;color:#9B9B9B;">Popups blocked -- click each link or allow popups in your browser settings</div></div>'
    + '<button onclick="document.getElementById(\'links-modal\').remove()" '
    + 'style="background:none;border:none;cursor:pointer;color:#9B9B9B;font-size:22px;line-height:1;padding:0;margin-left:12px;">x</button>'
    + '</div>'

    + '<div style="overflow-y:auto;flex:1;border:1px solid #F0F0F0;border-radius:12px;margin-bottom:16px;">'
    + linksHtml
    + '</div>'

    + '<div style="display:flex;align-items:center;justify-content:space-between;flex-shrink:0;">'
    + '<span style="font-size:12px;color:#B0B0B0;">' + urls.length + ' links total</span>'
    + '<div style="display:flex;gap:8px;">'
    + '<button onclick="document.getElementById(\'links-modal\').remove()" '
    + 'style="padding:9px 16px;border-radius:10px;border:1.5px solid #E0E0E0;background:#FAFAFA;'
    + 'font-size:13px;font-weight:600;cursor:pointer;font-family:\'DM Sans\',sans-serif;color:#6B6B6B;">Close</button>'
    + '<button onclick="(function(){document.getElementById(\'links-modal\').remove();resumeSession(' + JSON.stringify(urls) + ');})()" '
    + 'style="padding:9px 18px;border-radius:10px;border:none;background:#0A0A0A;color:#fff;'
    + 'font-size:13px;font-weight:700;cursor:pointer;font-family:\'DM Sans\',sans-serif;">Retry Open All</button>'
    + '</div></div>'
    + '</div>';

  modal.addEventListener('click', function(e) { if (e.target === modal) modal.remove(); });
  modal._urls = urls;
  document.body.appendChild(modal);
}

function copyUrls(urls) {
  const text = urls.join('\n');
  if (navigator.clipboard) {
    navigator.clipboard.writeText(text).then(() => showToast('URLs copied!'));
  } else {
    const ta = document.createElement('textarea');
    ta.value = text; document.body.appendChild(ta);
    ta.select(); document.execCommand('copy');
    document.body.removeChild(ta);
    showToast('URLs copied!');
  }
}

function exportSessions() {
  const data = JSON.stringify({ sessions, exportedAt: new Date().toISOString() }, null, 2);
  const blob = new Blob([data], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'deepwork-backup.json';
  document.body.appendChild(a); a.click();
  document.body.removeChild(a); URL.revokeObjectURL(url);
  showToast('Backup exported!');
}

function importSessions(event) {
  const file = event.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = (e) => {
    try {
      const parsed = JSON.parse(e.target.result);
      if (parsed.sessions) {
        sessions = parsed.sessions;
        saveSessions();
        renderSessions();
        renderStats();
        showToast(`Restored ${sessions.length} sessions!`);
      } else { showToast('Invalid backup file'); }
    } catch { showToast('Invalid backup file'); }
  };
  reader.readAsText(file);
  event.target.value = '';
}

// -- New Session Modal ----------------------------------
function openNewModal() {
  document.getElementById('modal-title').value = '';
  document.getElementById('modal-urls').value = '';
  document.getElementById('modal-tag-name').value = '';
  selectedColorIdx = 0;
  updateSwatches();
  document.getElementById('new-modal').style.display = 'flex';
  setTimeout(() => document.getElementById('modal-title').focus(), 100);
}

function closeNewModal() {
  document.getElementById('new-modal').style.display = 'none';
}

function handleModalOverlay(e) {
  if (e.target === document.getElementById('new-modal')) closeNewModal();
}

function updateSwatches() {
  const container = document.getElementById('color-swatches');
  container.innerHTML = TAG_COLORS.map((c, i) => `
    <div class="color-swatch ${i === selectedColorIdx ? 'active' : ''}"
      style="background:${c.bg}"
      onclick="selectColor(${i})">
    </div>
  `).join('');
}

function selectColor(idx) {
  selectedColorIdx = idx;
  updateSwatches();
}

function saveNewSession() {
  const title = document.getElementById('modal-title').value.trim();
  if (!title) return;
  const urlsRaw = document.getElementById('modal-urls').value;
  const urls = urlsRaw.split('\n').map(u => u.trim()).filter(u => u.startsWith('http'));
  const tagName = document.getElementById('modal-tag-name').value.trim();
  const tags = tagName ? [{ name: tagName, ...TAG_COLORS[selectedColorIdx] }] : [];
  const session = { id: generateId(), title, urls, tags, timestamp: Date.now(), pinned: false };
  sessions.unshift(session);
  saveSessions();
  renderSessions();
  renderStats();
  closeNewModal();
  showToast('Session saved!');
}

// -- Command Palette ------------------------------------
function openPalette() {
  document.getElementById('palette-overlay').style.display = 'flex';
  document.getElementById('palette-input').value = '';
  renderPaletteResults();
  setTimeout(() => document.getElementById('palette-input').focus(), 80);
}

function closePalette() {
  document.getElementById('palette-overlay').style.display = 'none';
}

function handlePaletteOverlay(e) {
  if (e.target === document.getElementById('palette-overlay')) closePalette();
}

function renderPaletteResults() {
  const query = document.getElementById('palette-input').value.trim().toLowerCase();
  const container = document.getElementById('palette-results');

  if (!query) {
    const hints = sessions.slice(0, 5).map(s =>
      `<div class="palette-hint" onclick="document.getElementById('palette-input').value='${escHtml(s.title)}';renderPaletteResults()">${escHtml(s.title)}</div>`
    ).join('');
    container.innerHTML = `<div class="palette-hints">${hints}</div>`;
    return;
  }

  const results = [];
  sessions.forEach(s => {
    s.urls.forEach(u => {
      if (u.toLowerCase().includes(query) || s.title.toLowerCase().includes(query)) {
        results.push({ url: u, session: s.title });
      }
    });
  });

  if (results.length === 0) {
    container.innerHTML = `<div class="palette-empty">No results for "${escHtml(query)}"</div>`;
    return;
  }

  container.innerHTML = results.slice(0, 8).map((r, i) => `
    <a class="palette-result" href="${r.url}" target="_blank" rel="noopener noreferrer" style="animation-delay:${i*0.04}s">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#C0C0C0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink:0"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
      <div>
        <div class="palette-url">${r.url.replace(/^https?:\/\/(www\.)?/,'').slice(0,60)}</div>
        <div class="palette-session">${escHtml(r.session)}</div>
      </div>
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#C0C0C0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left:auto;flex-shrink:0"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
    </a>
  `).join('');
}

// -- FAQ ------------------------------------------------
const FAQ_DATA = [
  { q: 'Where is my data stored?', a: 'All data is stored locally in your browser via localStorage. It never leaves your device -- no server involved, ever.' },
  { q: 'Is it free?', a: 'Yes, completely free. There are no servers to pay for, so there are no costs to pass on to you.' },
  { q: 'Does it work across devices?', a: 'Use the JSON Export feature to create a backup file, then import it on another device. Simple, portable, 100% in your control.' },
  { q: 'What happens if I clear browser data?', a: "Export a backup first! Use the 'Export' button in the dashboard to save a deepwork-backup.json file before clearing." },
  { q: 'Can I use it offline?', a: 'Yes. Deep-Work is fully functional without an internet connection. Your data is already on your device.' },
];

function buildFAQ() {
  const container = document.getElementById('faq-list');
  container.innerHTML = FAQ_DATA.map((item, i) => `
    <div class="faq-item">
      <button class="faq-btn" onclick="toggleFaq(${i})">
        <span class="faq-q">${escHtml(item.q)}</span>
        <svg class="faq-chevron" id="faq-chevron-${i}" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9B9B9B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
      </button>
      <div class="faq-answer" id="faq-answer-${i}">
        <p class="faq-a">${escHtml(item.a)}</p>
      </div>
    </div>
  `).join('');
}

function toggleFaq(i) {
  const answer = document.getElementById(`faq-answer-${i}`);
  const chevron = document.getElementById(`faq-chevron-${i}`);
  const isOpen = answer.classList.contains('open');
  answer.classList.toggle('open', !isOpen);
  chevron.classList.toggle('open', !isOpen);
}

// -- Help Modal -----------------------------------------
function openHelpModal() {
  document.getElementById('help-modal').style.display = 'flex';
  switchHelpTab('search');
}

function closeHelpModal() {
  document.getElementById('help-modal').style.display = 'none';
}

function handleHelpOverlay(e) {
  if (e.target === document.getElementById('help-modal')) closeHelpModal();
}

function switchHelpTab(tab) {
  var tabs = ['search', 'export', 'import', 'newsession'];
  tabs.forEach(function(t) {
    var btn = document.getElementById('htab-' + t);
    var content = document.getElementById('hcontent-' + t);
    if (btn) btn.classList.toggle('active', t === tab);
    if (content) content.style.display = t === tab ? 'block' : 'none';
  });
}

// -- Keyboard shortcuts ---------------------------------
document.addEventListener('keydown', (e) => {
  if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
    e.preventDefault();
    const palette = document.getElementById('palette-overlay');
    if (palette.style.display === 'none') openPalette(); else closePalette();
  }
  if (e.key === 'Escape') {
    closePalette();
    closeNewModal();
    closeHelpModal();
  }
  if (e.key === 'Enter' && document.getElementById('new-modal').style.display !== 'none') {
    saveNewSession();
  }
});

// -- Scroll-triggered animations ------------------------
function initScrollAnimations() {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.style.animation = `fadeInUp 0.55s ease ${e.target.dataset.delay || '0s'} both`;
        observer.unobserve(e.target);
      }
    });
  }, { threshold: 0.12 });

  document.querySelectorAll('.step-card, .feature-card, .audience-card').forEach((el, i) => {
    el.style.opacity = '0';
    el.dataset.delay = (i * 0.08) + 's';
    observer.observe(el);
  });
}

// -- Init -----------------------------------------------
(function init() {
  // Load sessions -- if none exist, seed with demo data and save them
  const stored = loadSessions();
  if (stored && stored.length > 0) {
    sessions = stored;
  } else {
    sessions = DEMO_SESSIONS;
    saveSessions(); // persist demo data immediately so refresh keeps them
  }

  buildFAQ();
  updateSwatches();
  renderStats();
  renderSessions();
  initScrollAnimations();

  // Restore last active page so refresh doesn't kick user back to landing
  const lastPage = localStorage.getItem('dw_active_page');
  if (lastPage === 'dashboard') {
    showPage('dashboard');
  }
})();

// -- Landing Page Particle Animation -------------------------
(function initParticles() {
  var canvas = document.getElementById('hero-canvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');

  var W, H, particles = [], mouse = { x: -9999, y: -9999 };
  var COUNT = 55;
  var MAX_DIST = 130;
  var MOUSE_RADIUS = 160;

  function resize() {
    var hero = document.getElementById('hero');
    if (!hero) return;
    W = canvas.width = hero.offsetWidth;
    H = canvas.height = hero.offsetHeight;
  }

  function Particle() {
    this.x = Math.random() * W;
    this.y = Math.random() * H;
    this.vx = (Math.random() - 0.5) * 0.35;
    this.vy = (Math.random() - 0.5) * 0.35;
    this.r = Math.random() * 2 + 1;
    this.baseAlpha = Math.random() * 0.25 + 0.08;
    this.alpha = this.baseAlpha;
  }

  Particle.prototype.update = function() {
    this.x += this.vx;
    this.y += this.vy;
    if (this.x < -10) this.x = W + 10;
    if (this.x > W + 10) this.x = -10;
    if (this.y < -10) this.y = H + 10;
    if (this.y > H + 10) this.y = -10;

    // subtle mouse repulsion
    var dx = this.x - mouse.x;
    var dy = this.y - mouse.y;
    var dist = Math.sqrt(dx * dx + dy * dy);
    if (dist < MOUSE_RADIUS) {
      var force = (MOUSE_RADIUS - dist) / MOUSE_RADIUS;
      this.x += dx / dist * force * 1.2;
      this.y += dy / dist * force * 1.2;
      this.alpha = Math.min(this.baseAlpha + force * 0.3, 0.55);
    } else {
      this.alpha += (this.baseAlpha - this.alpha) * 0.05;
    }
  };

  function init() {
    resize();
    particles = [];
    for (var i = 0; i < COUNT; i++) {
      particles.push(new Particle());
    }
  }

  var animRunning = true;

  function draw() {
    if (!animRunning) { requestAnimationFrame(draw); return; }
    ctx.clearRect(0, 0, W, H);

    // Draw connecting lines
    for (var i = 0; i < particles.length; i++) {
      for (var j = i + 1; j < particles.length; j++) {
        var dx = particles[i].x - particles[j].x;
        var dy = particles[i].y - particles[j].y;
        var dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < MAX_DIST) {
          var lineAlpha = (1 - dist / MAX_DIST) * 0.12;
          ctx.beginPath();
          ctx.moveTo(particles[i].x, particles[i].y);
          ctx.lineTo(particles[j].x, particles[j].y);
          ctx.strokeStyle = 'rgba(10,10,10,' + lineAlpha + ')';
          ctx.lineWidth = 0.8;
          ctx.stroke();
        }
      }
    }

    // Draw dots
    for (var k = 0; k < particles.length; k++) {
      var p = particles[k];
      p.update();
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(10,10,10,' + p.alpha + ')';
      ctx.fill();
    }

    requestAnimationFrame(draw);
  }

  // Mouse tracking
  var heroEl = document.getElementById('hero');
  if (heroEl) {
    heroEl.addEventListener('mousemove', function(e) {
      var rect = canvas.getBoundingClientRect();
      mouse.x = e.clientX - rect.left;
      mouse.y = e.clientY - rect.top;
    });
    heroEl.addEventListener('mouseleave', function() {
      mouse.x = -9999;
      mouse.y = -9999;
    });
  }

  window.addEventListener('resize', function() { resize(); });

  // Expose controls so showPage can pause/resume for performance
  window._particles = { pause: function() { animRunning = false; }, resume: function() { animRunning = true; } };

  init();
  draw();
})();
</script>
</body>
</html>